{% extends "base.html" %}
{% block body_contents %}
<link href="{{url_for('static', filename='styles/predictions.css')}}" rel="stylesheet">

<!--Section: Best Features-->
<section id="about" class="jumbotron text-center">

    <h2 class="mb-5 font-weight-bold">Predictions</h2>

    <div class="row d-flex justify-content-center mb-3">
        <div class="mb-3 col-md-6">
            <h6> <b class="font-weight-bold">Postcode:</b> {{postcode}}</h6>
            <h6> <b class="font-weight-bold">Brand:</b> {{brand}}</h6>
            <h6> <b class="font-weight-bold">Fuel Type:</b> {{fuel_type}}</h6>
        </div>
        <div class="mb-3 col-md-6">
            <h5 class="mb-3">Fuel is the cheapest on <span class="badge badge-pill green">{{cheapest_date}}</span>, <br><br>with its price being <span class="badge badge-pill green">¢ {{cheapest_price}}</span></h5>
        </div>
    </div>

    <canvas id="myChart" width="100" height="40"></canvas>

    <hr class="hr-dark wow fadeInLeft" data-wow-delay="0.3s">

    <table id="dtMaterialDesignExample" class="table table-striped" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th class="th-sm">Date
                    <i class="fa fa-sort float-right" aria-hidden="true"></i>
                </th>
                <th class="th-sm">Price (¢)
                    <i class="fa fa-sort float-right" aria-hidden="true"></i>
                </th>
            </tr>
        </thead>
        <tbody>
            {% for row in predictions %}
                <tr>
                    <td>{{row.date}}</td>
                    <td>{{row.predicted_price}}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
<script>
var ctx = document.getElementById("myChart").getContext('2d');
var date_dataset = {{date_dataset|safe}};
var price_dataset = {{price_dataset|safe}};
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: date_dataset,
        datasets: [{
            label: 'Price (¢)',
            backgroundColor: '#3E78C2',
			borderColor: '#071A29',
            data: price_dataset,
            fill: false,
        }]
    },
    options: {
        title: {
            display: true,
            text: 'Predicted prices of {{fuel_type|safe}} fuel at area {{postcode|safe}}'
        },
        tooltips: {
            mode: 'index',
            intersect: false,
        },
        hover: {
            mode: 'nearest',
            intersect: true
        },
    }
});
</script>
{% endblock %}